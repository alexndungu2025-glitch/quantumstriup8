/*! For license information please see main.4177876c.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var r=n(853),a=n(43),i=n(950);function o(e){var t="https://58d7834a-344e-4b84-8a14-5d886451472d.preview.emergentagent.com","/api/auth/update-language"),{method:"PUT",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({language:e})})).ok||console.warn("Failed to update language preference in backend")}catch(t){console.warn("Error updating language preference:",t)}}catch(t){console.error("Error changing language:",t)}finally{s(!1)}}},getCurrentLanguage:()=>l.find((e=>e.code===a))||l[0],getOppositeLanguage:()=>"en"===a?"sw":"en",isLoading:o};return(0,Fi.jsx)(no.Provider,{value:u,children:n})},ao=()=>{const{isAuthenticated:e,isViewer:n}=to(),[r,a]=(0,t.useState)({balance:0,totalSpent:0,packages:[],transactions:[],isLoading:!1,error:null}),i=(0,t.useCallback)((async()=>{try{const e=await _i();a((t=>u(u({},t),{},{packages:e.packages||{}})))}catch(e){console.error("Error fetching token packages:",e)}}),[]),o=(0,t.useCallback)((async()=>{if(e&&n())try{a((e=>u(u({},e),{},{isLoading:!0})));const e=await Ci();a((t=>u(u({},t),{},{balance:e.token_balance||0,totalSpent:e.total_spent||0,isLoading:!1,error:null})))}catch(t){const e=zi(t);a((t=>u(u({},t),{},{isLoading:!1,error:e})))}}),[e,n]),s=(0,t.useCallback)((async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e&&n())try{const e=await Pi(t,r);a((t=>u(u({},t),{},{transactions:0===r?e:[...t.transactions,...e]})))}catch(i){console.error("Error fetching transactions:",i)}}),[e,n]),l=(0,t.useCallback)((async(t,r)=>{if(!e||!n())return{success:!1,error:"Authentication required"};try{a((e=>u(u({},e),{},{isLoading:!0})));const e=await Ei({tokens:parseInt(t),phone_number:r});return a((e=>u(u({},e),{},{isLoading:!1}))),e.success?(setTimeout((()=>o()),2e3),{success:!0,data:e}):{success:!1,error:e.message}}catch(i){const e=zi(i);return a((t=>u(u({},t),{},{isLoading:!1,error:e}))),{success:!1,error:e}}}),[e,n,o]),c=(0,t.useCallback)((async e=>{try{return await Li(e)}catch(t){return console.error("Error checking payment status:",t),null}}),[]);(0,t.useEffect)((()=>{i(),e&&n()&&(o(),s())}),[e,n,i,o,s]);const d=(0,t.useCallback)((()=>{o(),s()}),[o,s]);return u(u({},r),{},{purchaseTokens:l,checkPaymentStatus:c,refresh:d,fetchBalance:o,fetchTransactions:s})},io={sm:640,md:768,lg:1024,xl:1280,"2xl":1536},oo=()=>{const[e,n]=(0,t.useState)({width:"undefined"!==typeof window?window.innerWidth:1024,height:"undefined"!==typeof window?window.innerHeight:768});(0,t.useEffect)((()=>{if("undefined"===typeof window)return;const e=()=>{n({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)}),[]);return{windowSize:e,isMobile:e.width<io.md,isTablet:e.width>=io.md&&e.width<io.lg,isDesktop:e.width>=io.lg,isLargeDesktop:e.width>=io.xl,isSmallScreen:e.width<io.sm,isMediumScreen:e.width>=io.md&&e.width<io.lg,isLargeScreen:e.width>=io.lg,breakpoints:io}},so=(e,t,n)=>e?{performers:"grid-cols-2 gap-3",stats:"grid-cols-2 gap-4",dashboard:"grid-cols-1 gap-6",forms:"grid-cols-1 gap-4"}:t?{performers:"grid-cols-3 gap-4",stats:"grid-cols-2 gap-4",dashboard:"grid-cols-2 gap-6",forms:"grid-cols-1 gap-4"}:{performers:"grid-cols-4 xl:grid-cols-6 gap-4",stats:"grid-cols-4 gap-6",dashboard:"grid-cols-2 gap-8",forms:"grid-cols-2 gap-6"},lo=(e,t)=>e?{container:"px-4 py-4",section:"mb-6",card:"p-4",header:"px-4 py-3",modal:"mx-4"}:t?{container:"px-6 py-6",section:"mb-8",card:"p-5",header:"px-6 py-4",modal:"mx-8"}:{container:"px-6 py-8",section:"mb-8",card:"p-6",header:"px-6 py-4",modal:""},uo=(e,t)=>e?{h1:"text-2xl font-bold",h2:"text-xl font-semibold",h3:"text-lg font-semibold",body:"text-sm",small:"text-xs",button:"text-sm"}:t?{h1:"text-3xl font-bold",h2:"text-2xl font-semibold",h3:"text-xl font-semibold",body:"text-base",small:"text-sm",button:"text-base"}:{h1:"text-4xl font-bold",h2:"text-3xl font-semibold",h3:"text-2xl font-semibold",body:"text-base",small:"text-sm",button:"text-base"},co=e=>{let{className:n="",variant:r="default"}=e;const{currentLanguage:a,supportedLanguages:i,changeLanguage:o,isLoading:s}=(()=>{const e=(0,t.useContext)(no);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e})(),{t:l}=Cn(),[u,c]=(0,t.useState)(!1),d=i.find((e=>e.code===a));return"compact"===r?(0,Fi.jsxs)("button",{onClick:()=>o("en"===a?"sw":"en"),disabled:s,className:"flex items-center px-3 py-2 text-sm font-medium text-white bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors ".concat(s?"opacity-50 cursor-not-allowed":""," ").concat(n),title:l("common.language"),children:[s?(0,Fi.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):(0,Fi.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})}),(0,Fi.jsx)("span",{className:"uppercase",children:null===d||void 0===d?void 0:d.code})]}):(0,Fi.jsxs)("div",{className:"relative ".concat(n),children:[(0,Fi.jsxs)("button",{onClick:()=>c(!u),disabled:s,className:"flex items-center px-4 py-2 text-sm font-medium text-white bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors ".concat(s?"opacity-50 cursor-not-allowed":""),children:[s?(0,Fi.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):(0,Fi.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})}),(0,Fi.jsx)("span",{children:null===d||void 0===d?void 0:d.nativeName}),(0,Fi.jsx)("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Fi.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u&&(0,Fi.jsxs)(Fi.Fragment,{children:[(0,Fi.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)}),(0,Fi.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-lg z-20 border border-gray-700",children:(0,Fi.jsx)("div",{className:"py-1",children:i.map((e=>(0,Fi.jsx)("button",{onClick:()=>{return t=e.code,o(t),void c(!1);var t},className:"block w-full text-left px-4 py-2 text-sm transition-colors ".concat(e.code===a?"bg-purple-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("span",{className:"font-medium",children:e.nativeName}),(0,Fi.jsxs)("span",{className:"ml-2 text-xs text-gray-400",children:["(",e.name,")"]}),e.code===a&&(0,Fi.jsx)("svg",{className:"w-4 h-4 ml-auto",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Fi.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})},e.code)))})})]})]})},fo=[{id:1,name:"Vivian_MaxxX",image:"https://images.unsplash.com/photo-1672794444732-e007954a177c?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NDk1Nzh8MHwxfHNlYXJjaHwxfHxwb3J0cmFpdCUyMHBlb3BsZXxlbnwwfHx8fDE3NTM1NTg3NTd8MA&ixlib=rb-4.1.0&q=85",country:"ke",isLive:!0,viewers:1234,isNew:!1,isHD:!0,hasTicketShow:!0,tokensEarned:45600,rating:4.8},{id:2,name:"African_Dream",image:"https://images.unsplash.com/photo-1699746277651-3b1438122eaa?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NDk1Nzh8MHwxfHNlYXJjaHwyfHxwb3J0cmFpdCUyMHBlb3BsZXxlbnwwfHx8fDE3NTM1NTg3NTd8MA&ixlib=rb-4.1.0&q=85",country:"ke",isLive:!0,viewers:856,isNew:!1,isHD:!1,tokensEarned:32100,rating:4.6},{id:3,name:"NairobiBabe",image:"https://images.unsplash.com/photo-1561740303-a0fd9fabc646?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NDk1Nzh8MHwxfHNlYXJjaHwzfHxwb3J0cmFpdCUyMHBlb3BsZXxlbnwwfHx8fDE3NTM1NTg3NTd8MA&ixlib=rb-4.1.0&q=85",country:"ke",isLive:!0,viewers:654,isNew:!1,isHD:!0,tokensEarned:67800,rating:4.9},{id:4,name:"SwahiliQueen",image:"https://images.unsplash.com/photo-1644224010199-407a662c9228?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NDk1Nzh8MHwxfHNlYXJjaHw0fHxwb3J0cmFpdCUyMHBlb3BsZXxlbnwwfHx8fDE3NTM1NTg3NTd8MA&ixlib=rb-4.1.0&q=85",country:"ke",isLive:!0,viewers:432,isNew:!1,isHD:!0,tokensEarned:23400,rating:4.7},{id:5,name:"KampalaGirl",image:"https://images.unsplash.com/photo-1633332755192-727a05c4013d?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NDQ2NDN8MHwxfHNlYXJjaHwxfHx1c2VyJTIwYXZhdGFyfGVufDB8fHx8MTc1MzU1ODc2OHww&ixlib=rb-4.1.0&q=85",country:"ug",isLive:!0,viewers:765,isNew:!1,isHD:!0,tokensEarned:54300,rating:4.8},{id:6,name:"DarEsSalaamBaby",image:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?crop=entropy&cs=srgb&fm=jpg&ixid=M3w3NDQ2NDN8MHwxfHNlYXJjaHwyfHx1c2VyJTIwYXZhdGFyfGVufDB8fHx8MTc1MzU1ODc2OHww&ixlib=rb-4.1.0&q=85",country:"tz",isLive:!0,viewers:543,isNew:!1,isHD:!0,tokensEarned:78900,rating:4.9}],po=e=>{let{isOpen:n,onClose:r,onConfirm:a}=e;const[i,o]=(0,t.useState)("girls"),{t:s}=Cn();if(!n)return null;return(0,Fi.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-50",children:(0,Fi.jsxs)("div",{className:"text-center text-white px-8",children:[(0,Fi.jsx)("div",{className:"absolute top-4 right-4",children:(0,Fi.jsx)(co,{variant:"compact"})}),(0,Fi.jsxs)("div",{className:"flex items-center justify-center mb-8",children:[(0,Fi.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white p-3 rounded-full mr-3",children:(0,Fi.jsx)("svg",{width:"32",height:"32",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Fi.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),(0,Fi.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:s("age_verification.title")})]}),(0,Fi.jsx)("p",{className:"text-lg mb-2",children:s("age_verification.welcome")}),(0,Fi.jsx)("p",{className:"text-lg mb-8",children:s("age_verification.join_community")}),(0,Fi.jsx)("p",{className:"text-white mb-6",children:s("age_verification.interested_in")}),(0,Fi.jsxs)("div",{className:"flex justify-center gap-4 mb-8",children:[(0,Fi.jsxs)("button",{onClick:()=>o("girls"),className:"px-8 py-4 rounded-xl border-2 transition-all ".concat("girls"===i?"bg-pink-600 border-pink-600 text-white":"border-gray-600 text-gray-300 hover:border-pink-400"),children:[(0,Fi.jsx)("div",{className:"text-2xl mb-1",children:"\u2640"}),(0,Fi.jsx)("div",{children:s("age_verification.girls")})]}),(0,Fi.jsxs)("button",{onClick:()=>o("guys"),className:"px-8 py-4 rounded-xl border-2 transition-all ".concat("guys"===i?"bg-blue-600 border-blue-600 text-white":"border-gray-600 text-gray-300 hover:border-blue-400"),children:[(0,Fi.jsx)("div",{className:"text-2xl mb-1",children:"\u2642"}),(0,Fi.jsx)("div",{children:s("age_verification.guys")})]}),(0,Fi.jsxs)("button",{onClick:()=>o("couples"),className:"px-8 py-4 rounded-xl border-2 transition-all ".concat("couples"===i?"bg-purple-600 border-purple-600 text-white":"border-gray-600 text-gray-300 hover:border-purple-400"),children:[(0,Fi.jsx)("div",{className:"text-2xl mb-1",children:"\ud83d\udc95"}),(0,Fi.jsx)("div",{children:s("age_verification.couples")})]})]}),(0,Fi.jsx)("button",{onClick:()=>{a(i)},className:"bg-green-600 hover:bg-green-700 text-white px-12 py-3 rounded-full text-lg font-semibold transition-colors mb-6",children:s("age_verification.over_18")}),(0,Fi.jsx)("div",{className:"text-xs text-gray-400 max-w-2xl mx-auto",children:(0,Fi.jsx)("p",{className:"mb-2",children:s("age_verification.terms_text")})}),(0,Fi.jsx)("button",{onClick:r,className:"mt-6 text-gray-400 hover:text-white underline",children:s("age_verification.exit_here")})]})})},ho=()=>{const e=he(),{login:n,isLoading:r,error:a,clearError:i}=to(),{isMobile:o,isTablet:s}=oo(),l=lo(o,s),c=uo(o,s),[d,f]=(0,t.useState)({email:"",password:""}),[p,h]=(0,t.useState)(!1);(0,t.useEffect)((()=>{i()}),[i]);const m=e=>{f(u(u({},d),{},{[e.target.name]:e.target.value}))};return(0,Fi.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-gray-900 to-black flex items-center justify-center px-4",children:(0,Fi.jsxs)("div",{className:"max-w-md w-full bg-gray-800 rounded-xl shadow-2xl ".concat(l.card," border border-gray-700"),children:[(0,Fi.jsxs)("div",{className:"text-center mb-8",children:[(0,Fi.jsx)("h1",{className:"".concat(c.h1," bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent mb-2"),children:"QUANTUMSTRIP"}),(0,Fi.jsx)("p",{className:"text-gray-300",children:"Sign in to your account"})]}),a&&(0,Fi.jsx)("div",{className:"mb-6 p-4 bg-red-900/30 border border-red-700 rounded-lg",children:(0,Fi.jsx)("p",{className:"text-red-300 text-sm",children:a})}),(0,Fi.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),i();(await n(d.email,d.password)).success&&e("/dashboard")},className:"space-y-6",children:[(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),(0,Fi.jsx)("input",{type:"email",name:"email",value:d.email,onChange:m,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-purple-500 focus:outline-none",placeholder:"Enter your email",required:!0,disabled:r})]}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),(0,Fi.jsxs)("div",{className:"relative",children:[(0,Fi.jsx)("input",{type:p?"text":"password",name:"password",value:d.password,onChange:m,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-purple-500 focus:outline-none pr-12",placeholder:"Enter your password",required:!0,disabled:r}),(0,Fi.jsx)("button",{type:"button",onClick:()=>h(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",disabled:r,children:p?(0,Fi.jsxs)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,Fi.jsx)("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z",clipRule:"evenodd"}),(0,Fi.jsx)("path",{d:"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"})]}):(0,Fi.jsxs)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,Fi.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,Fi.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]})})]})]}),(0,Fi.jsx)("button",{type:"submit",disabled:r||!d.email||!d.password,className:"w-full py-3 rounded-lg font-semibold transition-all ".concat(!r&&d.email&&d.password?"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:from-purple-700 hover:to-blue-700":"bg-gray-600 text-gray-300 cursor-not-allowed"),children:r?(0,Fi.jsxs)("div",{className:"flex items-center justify-center",children:[(0,Fi.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Fi.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Fi.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign In"})]}),(0,Fi.jsxs)("div",{className:"mt-6 text-center",children:[(0,Fi.jsxs)("p",{className:"text-gray-400",children:["Don't have an account?"," ",(0,Fi.jsx)("button",{onClick:()=>e("/register"),disabled:r,className:"text-purple-400 hover:text-purple-300 font-semibold",children:"Sign up"})]}),(0,Fi.jsx)("button",{onClick:()=>e("/"),disabled:r,className:"mt-4 text-gray-500 hover:text-gray-300 text-sm",children:"\u2190 Back to Home"})]})]})})},mo=e=>{let{userType:t,isAuthenticated:n,onLogout:r,userTokens:a=0}=e;const i=he(),o=e=>{switch(e){case"home":default:i("/");break;case"token-purchase":i("/token-purchase");break;case"admin-dashboard":i("/admin-dashboard");break;case"model-dashboard":i("/model-dashboard");break;case"viewer-dashboard":i("/viewer-dashboard");break;case"register":i("/register");break;case"login":i("/login")}};return(0,Fi.jsx)("header",{className:"bg-gray-900 border-b border-gray-700 px-4 py-3",children:(0,Fi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("button",{className:"lg:hidden text-gray-300 hover:text-white mr-4",children:(0,Fi.jsx)("svg",{width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Fi.jsx)("path",{d:"M4 6h16M4 12h16M4 18h16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),(0,Fi.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:()=>o("home"),children:[(0,Fi.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white p-2 rounded-full mr-3",children:(0,Fi.jsx)("svg",{width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Fi.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),(0,Fi.jsx)("h1",{className:"text-xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:"QUANTUMSTRIP"})]})]}),(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("div",{className:"mr-4",children:(0,Fi.jsx)(co,{variant:"compact"})}),n?(0,Fi.jsxs)("div",{className:"flex items-center",children:["viewer"===t&&(0,Fi.jsx)("div",{className:"flex items-center mr-4",children:(0,Fi.jsxs)("button",{onClick:()=>o("token-purchase"),className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-4 py-2 rounded-lg mr-2 flex items-center hover:from-green-700 hover:to-green-800",children:[(0,Fi.jsx)("svg",{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 24 24",className:"mr-1",children:(0,Fi.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),a," Tokens"]})}),(0,Fi.jsx)("button",{onClick:()=>o("admin"===t?"admin-dashboard":"model"===t?"model-dashboard":"viewer-dashboard"),className:"text-gray-300 hover:text-white mr-4",children:"Dashboard"}),(0,Fi.jsx)("button",{onClick:r,className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg",children:"Logout"})]}):(0,Fi.jsxs)(Fi.Fragment,{children:[(0,Fi.jsx)("button",{onClick:()=>o("register"),className:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-lg mr-2 border border-gray-600",children:"Sign Up"}),(0,Fi.jsx)("button",{onClick:()=>o("login"),className:"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-lg hover:from-purple-700 hover:to-blue-700",children:"Sign In"})]})]})]})})},go=()=>{const e=he(),{logout:n}=to(),[r]=(0,t.useState)(150),[a]=(0,t.useState)(fo.slice(0,4)),[i]=(0,t.useState)([{id:1,date:"2024-01-15",tokens:100,amount:1e3,status:"completed"},{id:2,date:"2024-01-10",tokens:50,amount:500,status:"completed"}]);return(0,Fi.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-gray-900 to-black",children:[(0,Fi.jsx)(mo,{userType:"viewer",isAuthenticated:!0,onLogout:n,userTokens:r}),(0,Fi.jsxs)("div",{className:"max-w-6xl mx-auto p-6 pt-8",children:[(0,Fi.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,Fi.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Viewer Dashboard"}),(0,Fi.jsx)("button",{onClick:()=>e("/token-purchase"),className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-lg font-semibold hover:from-green-700 hover:to-green-800",children:"Buy Tokens"})]}),(0,Fi.jsxs)("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[(0,Fi.jsx)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("div",{className:"bg-green-600 p-3 rounded-full mr-4",children:(0,Fi.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",children:(0,Fi.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("p",{className:"text-2xl font-bold text-white",children:r}),(0,Fi.jsx)("p",{className:"text-gray-400 text-sm",children:"Available Tokens"})]})]})}),(0,Fi.jsx)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("div",{className:"bg-pink-600 p-3 rounded-full mr-4",children:(0,Fi.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",children:(0,Fi.jsx)("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})})}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("p",{className:"text-2xl font-bold text-white",children:a.length}),(0,Fi.jsx)("p",{className:"text-gray-400 text-sm",children:"Favorite Models"})]})]})}),(0,Fi.jsx)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("div",{className:"bg-blue-600 p-3 rounded-full mr-4",children:(0,Fi.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",children:(0,Fi.jsx)("path",{d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2z"})})}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("p",{className:"text-2xl font-bold text-white",children:"12"}),(0,Fi.jsx)("p",{className:"text-gray-400 text-sm",children:"Private Shows"})]})]})}),(0,Fi.jsx)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("div",{className:"bg-purple-600 p-3 rounded-full mr-4",children:(0,Fi.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",children:(0,Fi.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("p",{className:"text-2xl font-bold text-white",children:"KES 1,500"}),(0,Fi.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Spent"})]})]})})]}),(0,Fi.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,Fi.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,Fi.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Favorite Models"}),(0,Fi.jsx)("div",{className:"space-y-4",children:a.map((e=>(0,Fi.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded-lg",children:[(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("img",{src:e.image,alt:e.name,className:"w-12 h-12 rounded-full object-cover mr-3"}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("h3",{className:"text-white font-semibold",children:e.name}),(0,Fi.jsx)("p",{className:"text-gray-400 text-sm",children:e.isLive?(0,Fi.jsx)("span",{className:"text-green-400",children:"\u25cf Online"}):"Offline"})]})]}),(0,Fi.jsx)("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm",children:e.isLive?"Watch":"Message"})]},e.id)))})]}),(0,Fi.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,Fi.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Recent Purchases"}),(0,Fi.jsx)("div",{className:"space-y-4",children:i.map((e=>(0,Fi.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded-lg",children:[(0,Fi.jsxs)("div",{children:[(0,Fi.jsxs)("h3",{className:"text-white font-semibold",children:[e.tokens," Tokens"]}),(0,Fi.jsxs)("p",{className:"text-gray-400 text-sm",children:[new Date(e.date).toLocaleDateString()," \u2022 KES ",e.amount]})]}),(0,Fi.jsx)("span",{className:"bg-green-600 text-white px-3 py-1 rounded-full text-xs",children:e.status})]},e.id)))})]})]})]})]})},yo=()=>{const e=he(),{logout:n}=to(),[r]=(0,t.useState)({tokensEarned:45600,keshBalance:22800,withdrawableAmount:22800,totalViewers:15430,rating:4.8,liveHours:156}),[a]=(0,t.useState)([{id:1,date:"2024-01-15",tokens:1200,amount:600,type:"Private Show"},{id:2,date:"2024-01-15",tokens:800,amount:400,type:"Tips"},{id:3,date:"2024-01-14",tokens:2100,amount:1050,type:"Private Show"}]);return(0,Fi.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-900 via-gray-900 to-black",children:[(0,Fi.jsx)(mo,{userType:"model",isAuthenticated:!0,onLogout:n}),(0,Fi.jsxs)("div",{className:"max-w-6xl mx-auto p-6 pt-8",children:[(0,Fi.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,Fi.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Model Dashboard"}),(0,Fi.jsxs)("div",{className:"flex space-x-4",children:[(0,Fi.jsx)("button",{onClick:()=>e("/private-show"),className:"bg-gradient-to-r from-green-600 to-green-700 text-white px-6 py-3 rounded-lg font-semibold hover:from-green-700 hover:to-green-800",children:"Go Live"}),(0,Fi.jsx)("button",{onClick:()=>{r.keshBalance<2e4?alert("Minimum withdrawal amount is KES 20,000. You currently have KES ".concat(r.keshBalance.toLocaleString())):alert("Withdrawal request submitted! Your earnings will be sent to your M-Pesa within 24 hours.")},className:"bg-gradient-to-r from-pink-600 to-pink-700 text-white px-6 py-3 rounded-lg font-semibold hover:from-pink-700 hover:to-pink-800",children:"Withdraw Earnings"})]})]}),(0,Fi.jsxs)("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[(0,Fi.jsx)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("div",{className:"bg-green-600 p-3 rounded-full mr-4",children:(0,Fi.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",children:(0,Fi.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("p",{className:"text-2xl font-bold text-white",children:r.tokensEarned.toLocaleString()}),(0,Fi.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Tokens Earned"})]})]})}),(0,Fi.jsx)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("div",{className:"bg-pink-600 p-3 rounded-full mr-4",children:(0,Fi.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",children:(0,Fi.jsx)("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 7.5V4.5C15 3.1 13.9 2 12.5 2S10 3.1 10 4.5V7.5L4 7V9L10 8.5V15L8 16V21H10V17L12 15.5L14 17V21H16V16L14 15V8.5L21 9Z"})})}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsxs)("p",{className:"text-2xl font-bold text-white",children:["KES ",r.keshBalance.toLocaleString()]}),(0,Fi.jsx)("p",{className:"text-gray-400 text-sm",children:"Available Balance"})]})]})}),(0,Fi.jsx)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("div",{className:"bg-blue-600 p-3 rounded-full mr-4",children:(0,Fi.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",children:(0,Fi.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})})}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("p",{className:"text-2xl font-bold text-white",children:r.totalViewers.toLocaleString()}),(0,Fi.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Viewers"})]})]})}),(0,Fi.jsx)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("div",{className:"bg-yellow-600 p-3 rounded-full mr-4",children:(0,Fi.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",children:(0,Fi.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("p",{className:"text-2xl font-bold text-white",children:r.rating}),(0,Fi.jsx)("p",{className:"text-gray-400 text-sm",children:"Rating"})]})]})})]}),(0,Fi.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,Fi.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,Fi.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Recent Earnings"}),(0,Fi.jsx)("div",{className:"space-y-4",children:a.map((e=>(0,Fi.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded-lg",children:[(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("h3",{className:"text-white font-semibold",children:e.type}),(0,Fi.jsxs)("p",{className:"text-gray-400 text-sm",children:[new Date(e.date).toLocaleDateString()," \u2022 ",e.tokens," tokens"]})]}),(0,Fi.jsxs)("div",{className:"text-right",children:[(0,Fi.jsxs)("p",{className:"text-green-400 font-semibold",children:["KES ",e.amount]}),(0,Fi.jsx)("p",{className:"text-xs text-gray-400",children:"Your share (50%)"})]})]},e.id)))})]}),(0,Fi.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,Fi.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Withdrawal Info"}),(0,Fi.jsxs)("div",{className:"space-y-4",children:[(0,Fi.jsxs)("div",{className:"p-4 bg-green-900/30 rounded-lg border border-green-700",children:[(0,Fi.jsx)("h3",{className:"text-green-300 font-semibold mb-2",children:"Available for Withdrawal"}),(0,Fi.jsxs)("p",{className:"text-2xl font-bold text-white",children:["KES ",r.withdrawableAmount.toLocaleString()]}),(0,Fi.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:r.withdrawableAmount>=2e4?"Ready to withdraw":"Need KES ".concat((2e4-r.withdrawableAmount).toLocaleString()," more for minimum withdrawal")})]}),(0,Fi.jsxs)("div",{className:"p-4 bg-blue-900/30 rounded-lg border border-blue-700",children:[(0,Fi.jsx)("h4",{className:"text-blue-300 font-semibold mb-2",children:"Withdrawal Details"}),(0,Fi.jsxs)("ul",{className:"text-sm text-gray-300 space-y-1",children:[(0,Fi.jsx)("li",{children:"\u2022 Minimum withdrawal: KES 20,000"}),(0,Fi.jsx)("li",{children:"\u2022 Processing time: 24 hours"}),(0,Fi.jsx)("li",{children:"\u2022 Method: M-Pesa"}),(0,Fi.jsx)("li",{children:"\u2022 Revenue share: 50% to models"})]})]})]})]})]}),(0,Fi.jsxs)("div",{className:"mt-8 bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,Fi.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Profile Settings"}),(0,Fi.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Display Name"}),(0,Fi.jsx)("input",{type:"text",defaultValue:"NairobiBabe",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-pink-500 focus:outline-none"})]}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Show Rate (tokens/min)"}),(0,Fi.jsx)("input",{type:"number",defaultValue:"20",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-pink-500 focus:outline-none"})]}),(0,Fi.jsxs)("div",{className:"md:col-span-2",children:[(0,Fi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Bio"}),(0,Fi.jsx)("textarea",{rows:"3",defaultValue:"Hey there! I'm your friendly Nairobi girl ready to have some fun! \ud83d\udc95",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-pink-500 focus:outline-none"})]})]}),(0,Fi.jsx)("button",{className:"mt-4 bg-pink-600 hover:bg-pink-700 text-white px-6 py-2 rounded-lg",children:"Update Profile"})]})]})]})},vo=()=>{he();const{logout:e}=to(),[n]=(0,t.useState)({totalUsers:12450,activeModels:234,totalRevenue:456e5,dailyRevenue:125e3,platformShare:228e5,modelPayouts:228e5}),[r]=(0,t.useState)([{id:1,user:"viewer123",model:"NairobiBabe",amount:1e3,tokens:100,date:"2024-01-15"},{id:2,user:"user456",model:"SwahiliQueen",amount:500,tokens:50,date:"2024-01-15"}]);return(0,Fi.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-red-900 via-gray-900 to-black",children:[(0,Fi.jsx)(mo,{userType:"admin",isAuthenticated:!0,onLogout:e}),(0,Fi.jsxs)("div",{className:"max-w-6xl mx-auto p-6 pt-8",children:[(0,Fi.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,Fi.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Admin Dashboard"}),(0,Fi.jsxs)("div",{className:"text-right",children:[(0,Fi.jsx)("p",{className:"text-gray-400 text-sm",children:"Platform Revenue (50%)"}),(0,Fi.jsxs)("p",{className:"text-2xl font-bold text-green-400",children:["KES ",n.platformShare.toLocaleString()]})]})]}),(0,Fi.jsxs)("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[(0,Fi.jsx)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("div",{className:"bg-blue-600 p-3 rounded-full mr-4",children:(0,Fi.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",children:(0,Fi.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("p",{className:"text-2xl font-bold text-white",children:n.totalUsers.toLocaleString()}),(0,Fi.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Users"})]})]})}),(0,Fi.jsx)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("div",{className:"bg-pink-600 p-3 rounded-full mr-4",children:(0,Fi.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",children:(0,Fi.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("p",{className:"text-2xl font-bold text-white",children:n.activeModels}),(0,Fi.jsx)("p",{className:"text-gray-400 text-sm",children:"Active Models"})]})]})}),(0,Fi.jsx)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("div",{className:"bg-green-600 p-3 rounded-full mr-4",children:(0,Fi.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",children:(0,Fi.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsxs)("p",{className:"text-2xl font-bold text-white",children:["KES ",n.dailyRevenue.toLocaleString()]}),(0,Fi.jsx)("p",{className:"text-gray-400 text-sm",children:"Daily Revenue"})]})]})}),(0,Fi.jsx)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("div",{className:"bg-purple-600 p-3 rounded-full mr-4",children:(0,Fi.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",children:(0,Fi.jsx)("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"})})}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsxs)("p",{className:"text-2xl font-bold text-white",children:["KES ",n.totalRevenue.toLocaleString()]}),(0,Fi.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Revenue"})]})]})})]}),(0,Fi.jsxs)("div",{className:"grid md:grid-cols-2 gap-8",children:[(0,Fi.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,Fi.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Recent Transactions"}),(0,Fi.jsx)("div",{className:"space-y-4",children:r.map((e=>(0,Fi.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded-lg",children:[(0,Fi.jsxs)("div",{children:[(0,Fi.jsxs)("h3",{className:"text-white font-semibold",children:[e.user," \u2192 ",e.model]}),(0,Fi.jsxs)("p",{className:"text-gray-400 text-sm",children:[e.tokens," tokens \u2022 ",new Date(e.date).toLocaleDateString()]})]}),(0,Fi.jsxs)("div",{className:"text-right",children:[(0,Fi.jsxs)("p",{className:"text-green-400 font-semibold",children:["KES ",e.amount]}),(0,Fi.jsxs)("p",{className:"text-xs text-gray-400",children:["Platform: KES ",e.amount/2]})]})]},e.id)))})]}),(0,Fi.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,Fi.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"System Settings"}),(0,Fi.jsxs)("div",{className:"space-y-4",children:[(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Platform Revenue Share (%)"}),(0,Fi.jsx)("input",{type:"number",defaultValue:"50",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-red-500 focus:outline-none"})]}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Minimum Withdrawal (KES)"}),(0,Fi.jsx)("input",{type:"number",defaultValue:"20000",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-red-500 focus:outline-none"})]}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Default Show Rate (tokens/min)"}),(0,Fi.jsx)("input",{type:"number",defaultValue:"20",className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-red-500 focus:outline-none"})]}),(0,Fi.jsx)("button",{className:"w-full bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg font-semibold",children:"Update Settings"})]})]})]})]})]})},bo=()=>{he();const{user:e,logout:n}=to(),[r,a]=(0,t.useState)(!1),[i]=(0,t.useState)(1),[o]=(0,t.useState)(20),[s,l]=(0,t.useState)(0),[u]=(0,t.useState)([{id:1,user:"viewer123",message:"Hi beautiful! \ud83d\ude0d",timestamp:"10:30"},{id:2,user:"system",message:"Private show started",timestamp:"10:31",isSystem:!0}]);(0,t.useEffect)((()=>{let e;return r&&(e=setInterval((()=>{l((e=>e+1))}),6e4)),()=>clearInterval(e)}),[r]);return(0,Fi.jsxs)("div",{className:"min-h-screen bg-black",children:[(0,Fi.jsx)(mo,{userType:null===e||void 0===e?void 0:e.role,isAuthenticated:!0,onLogout:n}),(0,Fi.jsxs)("div",{className:"flex h-screen pt-16",children:[(0,Fi.jsx)("div",{className:"flex-1 flex flex-col",children:(0,Fi.jsxs)("div",{className:"flex-1 bg-gray-900 relative",children:[(0,Fi.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-900 to-pink-900",children:r?(0,Fi.jsxs)("div",{className:"text-center",children:[(0,Fi.jsx)("div",{className:"w-32 h-32 bg-red-600 rounded-full flex items-center justify-center mb-4 animate-pulse",children:(0,Fi.jsx)("svg",{className:"w-16 h-16 text-white",fill:"currentColor",children:(0,Fi.jsx)("path",{d:"M8 5v14l11-7z"})})}),(0,Fi.jsx)("p",{className:"text-white text-xl",children:"Live Stream Active"}),"model"===userType&&(0,Fi.jsxs)("p",{className:"text-green-400 mt-2",children:["Earning ",o," tokens/minute"]})]}):(0,Fi.jsxs)("div",{className:"text-center",children:[(0,Fi.jsx)("div",{className:"w-32 h-32 bg-gray-700 rounded-full flex items-center justify-center mb-4",children:(0,Fi.jsx)("svg",{className:"w-16 h-16 text-gray-400",fill:"currentColor",children:(0,Fi.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 13.5v-7l6 3.5-6 3.5z"})})}),(0,Fi.jsx)("p",{className:"text-white text-xl",children:"Stream Offline"}),(0,Fi.jsx)("p",{className:"text-gray-400",children:'Click "Go Live" to start streaming'})]})}),(0,Fi.jsx)("div",{className:"absolute bottom-4 left-4 right-4",children:(0,Fi.jsx)("div",{className:"bg-black bg-opacity-60 rounded-lg p-4",children:(0,Fi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Fi.jsx)("button",{onClick:()=>{a(!r),r||l(0)},className:"px-6 py-2 rounded-lg font-semibold ".concat(r?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"),children:r?"End Stream":"Go Live"}),r&&(0,Fi.jsxs)("div",{className:"flex items-center text-white",children:[(0,Fi.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-2 animate-pulse"}),(0,Fi.jsxs)("span",{children:["LIVE \u2022 ",s," min"]})]})]}),(0,Fi.jsxs)("div",{className:"flex items-center space-x-4 text-white",children:[(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("svg",{className:"w-5 h-5 mr-1",fill:"currentColor",children:(0,Fi.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),i," viewers"]}),(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("svg",{className:"w-5 h-5 mr-1",fill:"currentColor",children:(0,Fi.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),o,"/min"]})]})]})})})]})}),(0,Fi.jsxs)("div",{className:"w-80 bg-gray-800 border-l border-gray-700 flex flex-col",children:[(0,Fi.jsx)("div",{className:"p-4 border-b border-gray-700",children:(0,Fi.jsx)("h3",{className:"text-white font-semibold",children:"Private Chat"})}),(0,Fi.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:u.map((e=>(0,Fi.jsx)("div",{className:"".concat(e.isSystem?"text-center":""),children:e.isSystem?(0,Fi.jsx)("p",{className:"text-gray-400 text-sm italic",children:e.message}):(0,Fi.jsxs)("div",{className:"bg-gray-700 rounded-lg p-3",children:[(0,Fi.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,Fi.jsx)("span",{className:"text-purple-400 font-semibold text-sm",children:e.user}),(0,Fi.jsx)("span",{className:"text-gray-400 text-xs",children:e.timestamp})]}),(0,Fi.jsx)("p",{className:"text-white text-sm",children:e.message})]})},e.id)))}),(0,Fi.jsxs)("div",{className:"p-4 border-t border-gray-700",children:[(0,Fi.jsxs)("div",{className:"flex space-x-2",children:[(0,Fi.jsx)("input",{type:"text",placeholder:"Type a message...",className:"flex-1 px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm focus:border-purple-500 focus:outline-none"}),(0,Fi.jsx)("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg",children:"Send"})]}),"viewer"===userType&&(0,Fi.jsxs)("div",{className:"mt-3 flex space-x-2",children:[(0,Fi.jsx)("button",{className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg text-sm",children:"Tip 10 tokens"}),(0,Fi.jsx)("button",{className:"flex-1 bg-yellow-600 hover:bg-yellow-700 text-white py-2 rounded-lg text-sm",children:"Tip 50 tokens"})]})]})]})]})]})},xo=(0,t.memo)((e=>{let{message:t,onDeleteMessage:n,canDelete:r}=e;return(0,Fi.jsxs)("div",{className:"flex items-start space-x-3 py-2 px-3 hover:bg-gray-800 rounded-lg group",children:[(0,Fi.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Fi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Fi.jsxs)("span",{className:"font-semibold text-sm ".concat((e=>{switch(e){case"admin":return"text-red-400";case"model":return"text-purple-400";case"viewer":return"text-blue-400";default:return"text-gray-400"}})(t.sender_role)),children:[(e=>{switch(e){case"admin":return"\ud83d\udc51";case"model":return"\u2b50";default:return""}})(t.sender_role)," ",t.sender_username]}),(0,Fi.jsx)("span",{className:"text-xs text-gray-500",children:(a=t.created_at,new Date(a).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}))}),t.tip_amount&&(0,Fi.jsxs)("span",{className:"bg-yellow-500 text-black px-2 py-1 rounded-full text-xs font-bold",children:["\ud83e\ude99 ",t.tip_amount," tokens"]})]}),(0,Fi.jsx)("div",{className:"mt-1",children:"tip"===t.message_type?(0,Fi.jsxs)("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-black p-2 rounded-lg font-semibold",children:["\ud83d\udcb0 Tipped ",t.tip_amount," tokens: ",t.content]}):(0,Fi.jsx)("p",{className:"text-gray-200 text-sm break-words",children:t.content})})]}),r&&(0,Fi.jsx)("button",{onClick:()=>n(t.id),className:"opacity-0 group-hover:opacity-100 text-red-400 hover:text-red-300 transition-opacity",title:"Delete message",children:"\ud83d\uddd1\ufe0f"})]});var a})),wo=(0,t.memo)((e=>{let{typingUsers:t}=e;if(0===t.length)return null;const n=1===t.length?"".concat(t[0]," is typing..."):"".concat(t.slice(0,-1).join(", ")," and ").concat(t[t.length-1]," are typing...");return(0,Fi.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-2 text-gray-400 text-sm",children:[(0,Fi.jsxs)("div",{className:"flex space-x-1",children:[(0,Fi.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,Fi.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,Fi.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,Fi.jsx)("span",{children:n})]})})),ko=(0,t.memo)((e=>{let{users:t,isCollapsed:n,onToggle:r}=e;const a=e=>{switch(e){case"admin":return"\ud83d\udc51";case"model":return"\u2b50";default:return"\ud83d\udc64"}};return(0,Fi.jsxs)("div",{className:"bg-gray-800 rounded-lg p-3",children:[(0,Fi.jsxs)("button",{onClick:r,className:"flex items-center justify-between w-full text-left",children:[(0,Fi.jsxs)("span",{className:"font-semibold text-white",children:["Online (",t.length,")"]}),(0,Fi.jsx)("span",{className:"text-gray-400",children:n?"\u25b6\ufe0f":"\u25bc"})]}),!n&&(0,Fi.jsx)("div",{className:"mt-3 space-y-1 max-h-40 overflow-y-auto",children:t.map((e=>(0,Fi.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,Fi.jsx)("span",{children:a(e.role)}),(0,Fi.jsx)("span",{className:"text-gray-300",children:e.username})]},e.user_id)))})]})})),So=e=>{let{roomId:n,modelName:r,isVisible:a,onClose:i}=e;const{user:o,token:s}=to(),[l,u]=(0,t.useState)([]),[c,d]=(0,t.useState)(""),[f,p]=(0,t.useState)(!1),[h,m]=(0,t.useState)([]),[g,y]=(0,t.useState)([]),[v,b]=(0,t.useState)(!0),[x,w]=(0,t.useState)(!1),[k,S]=(0,t.useState)(""),[j,N]=(0,t.useState)(""),[_,E]=(0,t.useState)(!1),C=(0,t.useRef)(null),P=(0,t.useRef)(null),L=(0,t.useRef)(null),T=(0,t.useRef)(null),R=(0,t.useCallback)((()=>{var e;null===(e=P.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[]),O=(0,t.useCallback)((e=>{switch(e.type){case"chat_message":u((t=>[...t,e.message])),R();break;case"private_message":console.log("Private message received:",e.message);break;case"online_users":m(e.users);break;case"user_connected":m((t=>t.find((t=>t.user_id===e.user_id))?t:[...t,{user_id:e.user_id,username:e.username,role:"viewer"}]));break;case"user_disconnected":m((t=>t.filter((t=>t.user_id!==e.user_id))));break;case"typing":e.user_id!==(null===o||void 0===o?void 0:o.id)&&y((t=>e.is_typing?[...t.filter((t=>t!==e.username)),e.username]:t.filter((t=>t!==e.username))));break;case"message_deleted":u((t=>t.filter((t=>t.id!==e.message_id))));break;case"moderation_action":console.log("Moderation action:",e);break;case"error":console.error("Chat error:",e.message)}}),[o,R]),M=(0,t.useCallback)((()=>{if(n&&s)try{C.current=Mi(n,O,(e=>{console.error("WebSocket connection error:",e),p(!1),setTimeout((()=>{a&&M()}),3e3)})),C.current.onopen=()=>{p(!0),b(!1)},C.current.onclose=()=>{p(!1)}}catch(e){console.error("Error creating WebSocket connection:",e),b(!1)}}),[n,s,O,a]),z=(0,t.useCallback)((async()=>{try{const e=await Ri(n,50);u(e),setTimeout(R,100)}catch(e){console.error("Error loading chat history:",e)}}),[n,R]);(0,t.useEffect)((()=>(a&&n&&(b(!0),z(),M()),()=>{C.current&&(C.current.close(),C.current=null)})),[a,n,z,M]);const A=(0,t.useCallback)((()=>{C.current&&f&&(C.current.send(JSON.stringify({type:"typing",is_typing:!0})),L.current&&clearTimeout(L.current),L.current=setTimeout((()=>{C.current&&f&&C.current.send(JSON.stringify({type:"typing",is_typing:!1}))}),2e3))}),[f]),D=(0,t.useCallback)((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"chat_message",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;C.current&&f&&e.trim()&&C.current.send(JSON.stringify({type:t,content:e.trim(),message_type:n?"tip":"text",tip_amount:n}))}),[f]),F=async e=>{try{await Oi(e)}catch(t){console.error("Error deleting message:",t)}},U=e=>"admin"===(null===o||void 0===o?void 0:o.role)||"model"===(null===o||void 0===o?void 0:o.role)||e.sender_id===(null===o||void 0===o?void 0:o.id);return a?(0,Fi.jsxs)("div",{className:"fixed bottom-4 right-4 w-96 h-96 bg-gray-900 border border-gray-700 rounded-lg shadow-2xl flex flex-col z-50",children:[(0,Fi.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-700 bg-gray-800 rounded-t-lg",children:[(0,Fi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Fi.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(f?"bg-green-500":"bg-red-500")}),(0,Fi.jsxs)("h3",{className:"font-semibold text-white truncate",children:[r," Chat"]})]}),(0,Fi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Fi.jsx)("button",{onClick:()=>w(!0),className:"text-yellow-400 hover:text-yellow-300 transition-colors",title:"Send Tip",children:"\ud83e\ude99"}),(0,Fi.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-white transition-colors",children:"\u2715"})]})]}),(0,Fi.jsxs)("div",{className:"flex-1 flex",children:[(0,Fi.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,Fi.jsx)("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:v?(0,Fi.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Fi.jsx)("div",{className:"text-gray-400",children:"Loading chat..."})}):(0,Fi.jsxs)(Fi.Fragment,{children:[l.map((e=>(0,Fi.jsx)(xo,{message:e,onDeleteMessage:F,canDelete:U(e)},e.id))),(0,Fi.jsx)(wo,{typingUsers:g}),(0,Fi.jsx)("div",{ref:P})]})}),(0,Fi.jsx)("div",{className:"p-3 border-t border-gray-700",children:(0,Fi.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c.trim()&&(D(c),d(""),setTimeout((()=>{var e;null===(e=T.current)||void 0===e||e.focus()}),100))},className:"flex space-x-2",children:[(0,Fi.jsx)("input",{ref:T,type:"text",value:c,onChange:e=>{d(e.target.value),A()},placeholder:"Type a message...",className:"flex-1 bg-gray-800 text-white rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:!f,maxLength:500}),(0,Fi.jsx)("button",{type:"submit",disabled:!f||!c.trim(),className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Send"})]})})]}),(0,Fi.jsx)("div",{className:"w-24 p-2 border-l border-gray-700",children:(0,Fi.jsx)(ko,{users:h,isCollapsed:_,onToggle:()=>E(!_)})})]}),x&&(0,Fi.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-lg",children:(0,Fi.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg max-w-sm w-full mx-4",children:[(0,Fi.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Send Tip"}),(0,Fi.jsxs)("div",{className:"space-y-4",children:[(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tip Amount (tokens)"}),(0,Fi.jsx)("input",{type:"number",value:k,onChange:e=>S(e.target.value),placeholder:"Enter amount",className:"w-full bg-gray-700 text-white rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",min:"1"})]}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Message"}),(0,Fi.jsx)("textarea",{value:j,onChange:e=>N(e.target.value),placeholder:"Enter your message",className:"w-full bg-gray-700 text-white rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",rows:"3",maxLength:200})]})]}),(0,Fi.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,Fi.jsx)("button",{onClick:()=>w(!1),className:"px-4 py-2 text-gray-300 hover:text-white transition-colors",children:"Cancel"}),(0,Fi.jsx)("button",{onClick:()=>{const e=parseInt(k);!e||e<=0||!j.trim()||(D(j,"chat_message",e),w(!1),S(""),N(""))},disabled:!k||!j.trim(),className:"bg-yellow-500 hover:bg-yellow-600 disabled:bg-gray-600 text-black disabled:text-gray-400 px-4 py-2 rounded-lg font-semibold transition-colors",children:"Send Tip"})]})]})})]}):null},jo=(0,t.memo)((e=>{let{message:t,isOwnMessage:n}=e;return(0,Fi.jsx)("div",{className:"flex ".concat(n?"justify-end":"justify-start"," mb-3"),children:(0,Fi.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg ".concat(n?"bg-purple-600 text-white":"bg-gray-700 text-gray-100"),children:[(0,Fi.jsx)("p",{className:"text-sm break-words",children:t.content}),(0,Fi.jsx)("p",{className:"text-xs mt-1 ".concat(n?"text-purple-200":"text-gray-400"),children:(r=t.created_at,new Date(r).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}))})]})});var r})),No=e=>{let{recipientId:n,recipientName:r,isVisible:a,onClose:i}=e;const{user:o,token:s}=to(),[l,u]=(0,t.useState)([]),[c,d]=(0,t.useState)(""),[f,p]=(0,t.useState)(!1),[h,m]=(0,t.useState)(!0),g=(0,t.useRef)(null),y=(0,t.useRef)(null),v=(0,t.useRef)(null),b="private_".concat([null===o||void 0===o?void 0:o.id,n].sort().join("_")),x=(0,t.useCallback)((()=>{var e;null===(e=y.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[]),w=(0,t.useCallback)((e=>{switch(e.type){case"private_message":u((t=>[...t,e.message])),x();break;case"error":console.error("Private chat error:",e.message)}}),[x]),k=(0,t.useCallback)((()=>{if(n&&s)try{g.current=Mi("private_chat",w,(e=>{console.error("Private chat WebSocket error:",e),p(!1),setTimeout((()=>{a&&k()}),3e3)})),g.current.onopen=()=>{p(!0),m(!1)},g.current.onclose=()=>{p(!1)}}catch(e){console.error("Error creating private chat WebSocket:",e),m(!1)}}),[n,s,w,a]),S=(0,t.useCallback)((async()=>{try{const e=(await Ri(b,50)).filter((e=>"private"===e.message_type&&(e.sender_id===(null===o||void 0===o?void 0:o.id)&&e.room_id.includes(n)||e.sender_id===n&&e.room_id.includes(null===o||void 0===o?void 0:o.id))));u(e),setTimeout(x,100)}catch(e){console.error("Error loading private chat history:",e)}}),[b,n,o,x]);(0,t.useEffect)((()=>(a&&n&&(m(!0),S(),k()),()=>{g.current&&(g.current.close(),g.current=null)})),[a,n,S,k]);const j=(0,t.useCallback)((e=>{g.current&&f&&e.trim()&&g.current.send(JSON.stringify({type:"private_message",recipient_id:n,content:e.trim()}))}),[f,n]);return a?(0,Fi.jsxs)("div",{className:"fixed bottom-4 left-4 w-80 h-96 bg-gray-900 border border-gray-700 rounded-lg shadow-2xl flex flex-col z-50",children:[(0,Fi.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-700 bg-gray-800 rounded-t-lg",children:[(0,Fi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Fi.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(f?"bg-green-500":"bg-red-500")}),(0,Fi.jsxs)("h3",{className:"font-semibold text-white truncate",children:["\ud83d\udcac ",r]})]}),(0,Fi.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-white transition-colors",children:"\u2715"})]}),(0,Fi.jsx)("div",{className:"flex-1 overflow-y-auto p-3",children:h?(0,Fi.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Fi.jsx)("div",{className:"text-gray-400",children:"Loading messages..."})}):0===l.length?(0,Fi.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Fi.jsxs)("div",{className:"text-gray-400 text-center",children:[(0,Fi.jsx)("p",{children:"No messages yet."}),(0,Fi.jsx)("p",{className:"text-sm",children:"Start a conversation!"})]})}):(0,Fi.jsxs)(Fi.Fragment,{children:[l.map((e=>(0,Fi.jsx)(jo,{message:e,isOwnMessage:e.sender_id===(null===o||void 0===o?void 0:o.id)},e.id))),(0,Fi.jsx)("div",{ref:y})]})}),(0,Fi.jsx)("div",{className:"p-3 border-t border-gray-700",children:(0,Fi.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!c.trim())return;j(c);const t={id:Date.now().toString(),sender_id:null===o||void 0===o?void 0:o.id,content:c.trim(),created_at:(new Date).toISOString()};u((e=>[...e,t])),d(""),setTimeout(x,100),setTimeout((()=>{var e;null===(e=v.current)||void 0===e||e.focus()}),100)},className:"flex space-x-2",children:[(0,Fi.jsx)("input",{ref:v,type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"Type a private message...",className:"flex-1 bg-gray-800 text-white rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:!f,maxLength:500}),(0,Fi.jsx)("button",{type:"submit",disabled:!f||!c.trim(),className:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Send"})]})})]}):null},_o=()=>{const{activeChats:e,privateChats:n,openChat:r,closeChat:a,openPrivateChat:i,closePrivateChat:o,toggleChatVisibility:s,togglePrivateChatVisibility:l,closeAllChats:c}=(()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)([]);return{activeChats:e,privateChats:r,openChat:(0,t.useCallback)(((e,t)=>{n((n=>n.find((t=>t.roomId===e))?n:[...n,{roomId:e,modelName:t,isVisible:!0}]))}),[]),closeChat:(0,t.useCallback)((e=>{n((t=>t.filter((t=>t.roomId!==e))))}),[]),openPrivateChat:(0,t.useCallback)(((e,t)=>{a((n=>n.find((t=>t.recipientId===e))?n:[...n,{recipientId:e,recipientName:t,isVisible:!0}]))}),[]),closePrivateChat:(0,t.useCallback)((e=>{a((t=>t.filter((t=>t.recipientId!==e))))}),[]),toggleChatVisibility:(0,t.useCallback)((e=>{n((t=>t.map((t=>t.roomId===e?u(u({},t),{},{isVisible:!t.isVisible}):t))))}),[]),togglePrivateChatVisibility:(0,t.useCallback)((e=>{a((t=>t.map((t=>t.recipientId===e?u(u({},t),{},{isVisible:!t.isVisible}):t))))}),[]),closeAllChats:(0,t.useCallback)((()=>{n([]),a([])}),[])}})(),{notifications:d,addNotification:f,removeNotification:p,clearAllNotifications:h}=(()=>{const[e,n]=(0,t.useState)([]),r=(0,t.useCallback)((e=>{const t=Date.now().toString(),r=u(u({},e),{},{id:t,timestamp:new Date});return n((e=>[...e,r])),setTimeout((()=>{n((e=>e.filter((e=>e.id!==t))))}),5e3),t}),[]),a=(0,t.useCallback)((e=>{n((t=>t.filter((t=>t.id!==e))))}),[]);return{notifications:e,addNotification:r,removeNotification:a,clearAllNotifications:(0,t.useCallback)((()=>{n([])}),[])}})();return(0,Fi.jsxs)(Fi.Fragment,{children:[e.map((e=>(0,Fi.jsx)(So,{roomId:e.roomId,modelName:e.modelName,isVisible:e.isVisible,onClose:()=>a(e.roomId)},e.roomId))),n.map((e=>(0,Fi.jsx)(No,{recipientId:e.recipientId,recipientName:e.recipientName,isVisible:e.isVisible,onClose:()=>o(e.recipientId)},e.recipientId))),(0,Fi.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:d.map((e=>(0,Fi.jsx)("div",{className:"bg-purple-600 text-white px-4 py-3 rounded-lg shadow-lg max-w-sm",children:(0,Fi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("p",{className:"font-semibold text-sm",children:e.title}),(0,Fi.jsx)("p",{className:"text-sm opacity-90",children:e.message})]}),(0,Fi.jsx)("button",{onClick:()=>p(e.id),className:"ml-3 text-white hover:text-gray-300 transition-colors",children:"\u2715"})]})},e.id)))}),!1]})},Eo=()=>{const e=he(),{register:n,isLoading:r,error:a,clearError:i}=to(),{isMobile:o,isTablet:s}=oo(),l=lo(o,s),c=uo(o,s),[d,f]=(0,t.useState)("viewer"),[p,h]=(0,t.useState)({username:"",email:"",password:"",confirmPassword:"",phone:"",age:"",terms:!1}),[m,g]=(0,t.useState)(!1),[y,v]=(0,t.useState)(!0);(0,t.useEffect)((()=>{i()}),[i]),(0,t.useEffect)((()=>{v(p.password===p.confirmPassword||""===p.confirmPassword)}),[p.password,p.confirmPassword]);const b=e=>{const{name:t,value:n,type:r,checked:a}=e.target;h(u(u({},p),{},{[t]:"checkbox"===r?a:n}))};return(0,Fi.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-gray-900 to-black flex items-center justify-center px-4 py-8",children:(0,Fi.jsxs)("div",{className:"max-w-md w-full bg-gray-800 rounded-xl shadow-2xl ".concat(l.card," border border-gray-700"),children:[(0,Fi.jsxs)("div",{className:"text-center mb-8",children:[(0,Fi.jsx)("h1",{className:"".concat(c.h1," bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent mb-2"),children:"QUANTUMSTRIP"}),(0,Fi.jsx)("p",{className:"text-gray-300",children:"Create your account"})]}),a&&(0,Fi.jsx)("div",{className:"mb-6 p-4 bg-red-900/30 border border-red-700 rounded-lg",children:(0,Fi.jsx)("p",{className:"text-red-300 text-sm",children:a})}),(0,Fi.jsxs)("div",{className:"flex mb-6 bg-gray-700 rounded-lg p-1",children:[(0,Fi.jsx)("button",{type:"button",onClick:()=>f("viewer"),disabled:r,className:"flex-1 py-2 px-4 rounded-md transition-all ".concat("viewer"===d?"bg-purple-600 text-white":"text-gray-300 hover:text-white"),children:"Viewer"}),(0,Fi.jsx)("button",{type:"button",onClick:()=>f("model"),disabled:r,className:"flex-1 py-2 px-4 rounded-md transition-all ".concat("model"===d?"bg-pink-600 text-white":"text-gray-300 hover:text-white"),children:"Model"})]}),(0,Fi.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),i(),!y)return;if(!p.terms)return;const r={username:p.username,email:p.email,password:p.password,phone:p.phone,age:parseInt(p.age),role:d,country:"ke"};(await n(r)).success&&(alert("Registration successful! Please check your email to verify your account."),e("/login"))},className:"space-y-4",children:[(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),(0,Fi.jsx)("input",{type:"text",name:"username",value:p.username,onChange:b,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-purple-500 focus:outline-none",placeholder:"Choose a username",required:!0,disabled:r})]}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),(0,Fi.jsx)("input",{type:"email",name:"email",value:p.email,onChange:b,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-purple-500 focus:outline-none",placeholder:"Enter your email",required:!0,disabled:r})]}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Phone Number"}),(0,Fi.jsx)("input",{type:"tel",name:"phone",value:p.phone,onChange:b,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-purple-500 focus:outline-none",placeholder:"254712345678",required:!0,disabled:r})]}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Age"}),(0,Fi.jsx)("input",{type:"number",name:"age",min:"18",value:p.age,onChange:b,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-purple-500 focus:outline-none",placeholder:"Must be 18+",required:!0,disabled:r})]}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),(0,Fi.jsxs)("div",{className:"relative",children:[(0,Fi.jsx)("input",{type:m?"text":"password",name:"password",value:p.password,onChange:b,className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-purple-500 focus:outline-none pr-12",placeholder:"Create a password",required:!0,disabled:r}),(0,Fi.jsx)("button",{type:"button",onClick:()=>g(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",disabled:r,children:m?"\ud83d\udc41\ufe0f":"\ud83d\udc41\ufe0f\u200d\ud83d\udde8\ufe0f"})]})]}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Confirm Password"}),(0,Fi.jsx)("input",{type:"password",name:"confirmPassword",value:p.confirmPassword,onChange:b,className:"w-full px-4 py-3 border rounded-lg text-white focus:outline-none ".concat(y?"bg-gray-700 border-gray-600 focus:border-purple-500":"bg-red-900/30 border-red-500"),placeholder:"Confirm your password",required:!0,disabled:r}),!y&&(0,Fi.jsx)("p",{className:"text-red-400 text-xs mt-1",children:"Passwords do not match"})]}),(0,Fi.jsxs)("div",{className:"flex items-start",children:[(0,Fi.jsx)("input",{type:"checkbox",id:"terms",name:"terms",checked:p.terms,onChange:b,className:"w-4 h-4 text-purple-600 bg-gray-700 border-gray-600 rounded focus:ring-purple-500 mt-1",required:!0,disabled:r}),(0,Fi.jsxs)("label",{htmlFor:"terms",className:"ml-2 text-sm text-gray-300",children:["I agree to the"," ",(0,Fi.jsx)("button",{type:"button",className:"text-purple-400 hover:text-purple-300",children:"Terms of Service"})," ","and"," ",(0,Fi.jsx)("button",{type:"button",className:"text-purple-400 hover:text-purple-300",children:"Privacy Policy"})]})]}),(0,Fi.jsx)("button",{type:"submit",disabled:r||!p.terms||!y||!p.email||!p.password,className:"w-full py-3 rounded-lg font-semibold transition-all ".concat(!r&&p.terms&&y&&p.email&&p.password?"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:from-purple-700 hover:to-blue-700":"bg-gray-600 text-gray-300 cursor-not-allowed"),children:r?(0,Fi.jsxs)("div",{className:"flex items-center justify-center",children:[(0,Fi.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Fi.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Fi.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating account..."]}):"Create ".concat(d.charAt(0).toUpperCase()+d.slice(1)," Account")})]}),(0,Fi.jsxs)("div",{className:"mt-6 text-center",children:[(0,Fi.jsxs)("p",{className:"text-gray-400",children:["Already have an account?"," ",(0,Fi.jsx)("button",{onClick:()=>e("/login"),disabled:r,className:"text-purple-400 hover:text-purple-300 font-semibold",children:"Sign in"})]}),(0,Fi.jsx)("button",{onClick:()=>e("/"),disabled:r,className:"mt-4 text-gray-500 hover:text-gray-300 text-sm",children:"\u2190 Back to Home"})]})]})})},Co=()=>{const e=he(),{user:n}=to(),{packages:r,balance:a,isLoading:i,error:o,purchaseTokens:s,checkPaymentStatus:l,fetchBalance:u}=ao(),{isMobile:c,isTablet:d}=oo(),f=lo(c,d),p=uo(c,d),h=so(c,d),[m,g]=(0,t.useState)(null),[y,v]=(0,t.useState)(""),[b,x]=(0,t.useState)(!1),[w,k]=(0,t.useState)(null),[S,j]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(r&&Object.keys(r).length>0&&!m){const e=Object.entries(r).map((e=>{let[t,n]=e;return{tokens:parseInt(t),price:parseFloat(n),popular:100===parseInt(t)}}));g(e[1]||e[0])}}),[r,m]);const N=e=>{const t=setInterval((async()=>{const n=await l(e);n&&n.transaction_id&&(clearInterval(t),"completed"===n.status?(j({success:!0,message:"Payment successful! Your tokens have been added to your account."}),setTimeout((()=>{u()}),2e3)):"failed"===n.status&&j({success:!1,message:"Payment failed. Please try again."}))}),3e3);setTimeout((()=>{clearInterval(t)}),3e5)};if(!r||0===Object.keys(r).length)return(0,Fi.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-gray-900 to-black flex items-center justify-center",children:(0,Fi.jsxs)("div",{className:"text-white text-center",children:[(0,Fi.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),(0,Fi.jsx)("p",{children:"Loading token packages..."})]})});const _=Object.entries(r).map((e=>{let[t,n]=e;return{tokens:parseInt(t),price:parseFloat(n),popular:100===parseInt(t)}})).sort(((e,t)=>e.tokens-t.tokens));return(0,Fi.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-gray-900 to-black",children:(0,Fi.jsxs)("div",{className:"max-w-4xl mx-auto ".concat(f.container," pt-8"),children:[(0,Fi.jsxs)("div",{className:"text-center mb-8",children:[(0,Fi.jsx)("h1",{className:"".concat(p.h1," text-white mb-2"),children:"Purchase Tokens"}),(0,Fi.jsx)("p",{className:"text-gray-300",children:"Choose your token package and pay securely with M-Pesa"}),void 0!==a&&(0,Fi.jsxs)("div",{className:"mt-4 text-green-400",children:["Current Balance: ",Ai(a)," tokens"]})]}),o&&(0,Fi.jsx)("div",{className:"mb-6 p-4 bg-red-900/30 border border-red-700 rounded-lg text-center",children:(0,Fi.jsx)("p",{className:"text-red-300",children:o})}),S&&(0,Fi.jsxs)("div",{className:"mb-6 p-4 border rounded-lg text-center ".concat(S.success?"bg-green-900/30 border-green-700 text-green-300":"bg-red-900/30 border-red-700 text-red-300"),children:[(0,Fi.jsx)("p",{children:S.message}),S.success&&w&&(0,Fi.jsxs)("p",{className:"text-sm mt-2",children:["Transaction ID: ",w]})]}),(0,Fi.jsxs)("div",{className:"".concat(h.forms," gap-8"),children:[(0,Fi.jsxs)("div",{className:"bg-gray-800 rounded-xl border border-gray-700",style:{padding:f.card.replace("p-","").split(" ").map((e=>"".concat(e.replace(/\d+/,(e=>"".concat(4*parseInt(e),"px")))))).join(" ")},children:[(0,Fi.jsx)("h2",{className:"".concat(p.h2," text-white mb-4"),children:"Select Package"}),(0,Fi.jsx)("div",{className:"space-y-3",children:_.map((e=>(0,Fi.jsx)("div",{onClick:()=>g(e),className:"p-4 rounded-lg border-2 cursor-pointer transition-all ".concat((null===m||void 0===m?void 0:m.tokens)===e.tokens?"border-purple-500 bg-purple-900/30":"border-gray-600 hover:border-gray-500"," ").concat(b?"pointer-events-none opacity-50":""),children:(0,Fi.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Fi.jsxs)("div",{children:[(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("span",{className:"text-xl font-bold text-white mr-2",children:e.tokens}),(0,Fi.jsx)("span",{className:"text-gray-300",children:"Tokens"}),e.popular&&(0,Fi.jsx)("span",{className:"bg-green-500 text-white text-xs px-2 py-1 rounded-full ml-2",children:"POPULAR"})]}),(0,Fi.jsxs)("div",{className:"text-sm text-gray-400",children:[Di(e.price/e.tokens)," per token"]})]}),(0,Fi.jsxs)("div",{className:"text-right",children:[(0,Fi.jsx)("div",{className:"text-lg font-semibold text-green-400",children:Di(e.price)}),e.tokens>=200&&(0,Fi.jsx)("div",{className:"text-xs text-green-400",children:"Save 5%"})]})]})},e.tokens)))}),(0,Fi.jsxs)("div",{className:"mt-6 p-4 bg-blue-900/30 rounded-lg border border-blue-700",children:[(0,Fi.jsx)("h3",{className:"text-blue-300 font-semibold mb-2",children:"What can you do with tokens?"}),(0,Fi.jsxs)("ul",{className:"text-sm text-gray-300 space-y-1",children:[(0,Fi.jsx)("li",{children:"\u2022 Private shows: 20 tokens/minute"}),(0,Fi.jsx)("li",{children:"\u2022 Tip models: Starting from 1 token"}),(0,Fi.jsx)("li",{children:"\u2022 Send messages and requests"}),(0,Fi.jsx)("li",{children:"\u2022 Access exclusive content"})]})]})]}),(0,Fi.jsxs)("div",{className:"bg-gray-800 rounded-xl border border-gray-700",style:{padding:f.card.replace("p-","").split(" ").map((e=>"".concat(e.replace(/\d+/,(e=>"".concat(4*parseInt(e),"px")))))).join(" ")},children:[(0,Fi.jsx)("h2",{className:"".concat(p.h2," text-white mb-4"),children:"Payment Details"}),(0,Fi.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!m||!y)return;x(!0),j(null);const t=await s(m.tokens,y);t.success?(k(t.data.checkout_request_id),j({success:!0,message:t.data.message||"STK push sent to your phone!"}),t.data.checkout_request_id&&N(t.data.checkout_request_id)):j({success:!1,message:t.error||"Payment failed"}),x(!1)},className:"space-y-6",children:[(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Payment Method"}),(0,Fi.jsx)("div",{className:"p-4 rounded-lg border-2 border-green-500 bg-green-900/30",children:(0,Fi.jsxs)("div",{className:"flex items-center",children:[(0,Fi.jsx)("div",{className:"bg-green-600 text-white px-3 py-1 rounded font-bold text-sm mr-3",children:"M-PESA"}),(0,Fi.jsx)("span",{className:"text-white",children:"Pay with M-Pesa"})]})})]}),(0,Fi.jsxs)("div",{children:[(0,Fi.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"M-Pesa Phone Number"}),(0,Fi.jsx)("input",{type:"tel",value:y,onChange:e=>v(e.target.value),className:"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:border-green-500 focus:outline-none",placeholder:"254712345678",required:!0,disabled:b}),(0,Fi.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Enter your M-Pesa registered phone number"})]}),m&&(0,Fi.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,Fi.jsx)("h3",{className:"text-white font-semibold mb-2",children:"Order Summary"}),(0,Fi.jsxs)("div",{className:"flex justify-between text-gray-300 mb-2",children:[(0,Fi.jsxs)("span",{children:[m.tokens," Tokens"]}),(0,Fi.jsx)("span",{children:Di(m.price)})]}),(0,Fi.jsx)("div",{className:"border-t border-gray-600 pt-2",children:(0,Fi.jsxs)("div",{className:"flex justify-between text-white font-semibold",children:[(0,Fi.jsx)("span",{children:"Total"}),(0,Fi.jsx)("span",{children:Di(m.price)})]})})]}),(0,Fi.jsx)("button",{type:"submit",disabled:b||!m||!y,className:"w-full py-3 rounded-lg font-semibold transition-all ".concat(!b&&m&&y?"bg-gradient-to-r from-green-600 to-green-700 text-white hover:from-green-700 hover:to-green-800":"bg-gray-600 text-gray-300 cursor-not-allowed"),children:b?(0,Fi.jsxs)("div",{className:"flex items-center justify-center",children:[(0,Fi.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,Fi.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Fi.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):m?"Pay ".concat(Di(m.price)," with M-Pesa"):"Select a package"})]}),(0,Fi.jsx)("div",{className:"mt-6 text-center",children:(0,Fi.jsx)("button",{onClick:()=>e("/viewer-dashboard"),disabled:b,className:"text-gray-400 hover:text-white text-sm",children:"\u2190 Back to Dashboard"})})]})]})]})})},Po=()=>{const e=he(),{user:n,logout:r}=to(),{isMobile:a,isTablet:i}=oo(),[o,s]=(0,t.useState)([]),[l,u]=(0,t.useState)(!0),[c,d]=(0,t.useState)(null),[f,p]=(0,t.useState)("girls");(0,t.useEffect)((()=>{const e=async()=>{try{u(!0);const e=await Ti();s(e.models||[])}catch(e){console.error("Error loading live models:",e),d("Failed to load live models")}finally{u(!1)}};e();const t=setInterval(e,3e4);return()=>clearInterval(t)}),[]);const h=n=>{var r;let{model:a}=n;const[i,o]=(0,t.useState)(!1);return(0,Fi.jsxs)("div",{className:"bg-gray-800 rounded-xl overflow-hidden shadow-lg transition-all duration-300 hover:shadow-2xl hover:scale-105",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[(0,Fi.jsxs)("div",{className:"relative",children:[(0,Fi.jsx)("img",{src:a.avatar_url||"/default-avatar.jpg",alt:a.display_name,className:"w-full h-48 object-cover"}),(0,Fi.jsxs)("div",{className:"absolute top-2 left-2 bg-red-600 text-white px-2 py-1 rounded-full text-xs font-bold flex items-center",children:[(0,Fi.jsx)("div",{className:"w-2 h-2 bg-white rounded-full mr-1 animate-pulse"}),"LIVE"]}),(0,Fi.jsxs)("div",{className:"absolute top-2 right-2 bg-black bg-opacity-70 text-white px-2 py-1 rounded-full text-xs",children:["\ud83d\udc65 ",a.current_viewers||0]}),i&&(0,Fi.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,Fi.jsxs)("div",{className:"space-y-2",children:[(0,Fi.jsx)("button",{onClick:()=>{return t=a.model_id,n=a.display_name,console.log("Opening chat with ".concat(n," (").concat(t,")")),void e("/chat/".concat(t));var t,n},className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"\ud83d\udcac Join Chat"}),(0,Fi.jsx)("button",{onClick:()=>e("/private-show/".concat(a.model_id)),className:"bg-yellow-500 hover:bg-yellow-600 text-black px-4 py-2 rounded-lg text-sm font-semibold transition-colors",children:"\ud83c\udfac Private Show"})]})})]}),(0,Fi.jsxs)("div",{className:"p-4",children:[(0,Fi.jsx)("h3",{className:"text-white font-semibold text-lg mb-1",children:a.display_name}),(0,Fi.jsx)("p",{className:"text-gray-400 text-sm mb-2 line-clamp-2",children:a.bio||"No bio available"}),(0,Fi.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fi.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Fi.jsx)("div",{className:"flex items-center text-yellow-400",children:(0,Fi.jsxs)("span",{className:"text-sm",children:["\u2b50 ",(null===(r=a.rating)||void 0===r?void 0:r.toFixed(1))||"4.5"]})}),(0,Fi.jsx)("span",{className:"text-gray-500 text-xs",children:"\u2022"}),(0,Fi.jsxs)("span",{className:"text-gray-400 text-xs",children:[a.total_shows||0," shows"]})]}),(0,Fi.jsxs)("div",{className:"text-purple-400 text-sm font-semibold",children:[a.show_rate||20," tokens/min"]})]})]})]})},m=()=>(0,Fi.jsx)("header",{className:"bg-gray-900 border-b border-gray-700 sticky top-0 z-40",children:(0,Fi.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Fi.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,Fi.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Fi.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-purple-400 to-blue-400 bg-clip-text text-transparent",children:"QUANTUMSTRIP"}),(0,Fi.jsx)("div",{className:"hidden md:block",children:(0,Fi.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Fi.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,Fi.jsxs)("span",{className:"text-green-400 text-sm font-semibold",children:[o.length," models online"]})]})})]}),(0,Fi.jsx)("div",{className:"flex items-center space-x-4",children:n?(0,Fi.jsxs)(Fi.Fragment,{children:[(0,Fi.jsxs)("div",{className:"text-white",children:[(0,Fi.jsx)("span",{className:"text-sm text-gray-400",children:"Welcome, "}),(0,Fi.jsx)("span",{className:"font-semibold",children:n.username})]}),(0,Fi.jsx)("button",{onClick:()=>e("/dashboard"),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Dashboard"}),(0,Fi.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-white text-sm transition-colors",children:"Logout"})]}):(0,Fi.jsxs)(Fi.Fragment,{children:[(0,Fi.jsx)("button",{onClick:()=>e("/login"),className:"text-white px-4 py-2 rounded-lg text-sm hover:bg-gray-800 transition-colors",children:"Login"}),(0,Fi.jsx)("button",{onClick:()=>e("/register"),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm transition-colors",children:"Register"})]})})]})})}),g=()=>(0,Fi.jsx)("div",{className:"bg-gray-800 rounded-lg p-1 flex space-x-1 mb-6",children:[{id:"girls",label:"\ud83d\udc69 Girls",emoji:"\ud83d\udc69"},{id:"couples",label:"\ud83d\udc91 Couples",emoji:"\ud83d\udc91"},{id:"guys",label:"\ud83d\udc68 Guys",emoji:"\ud83d\udc68"},{id:"trans",label:"\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f Trans",emoji:"\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f"}].map((e=>(0,Fi.jsx)("button",{onClick:()=>p(e.id),className:"flex-1 py-3 px-4 rounded-md transition-all text-sm font-semibold ".concat(f===e.id?"bg-purple-600 text-white":"text-gray-400 hover:text-white hover:bg-gray-700"),children:e.label},e.id)))});return l?(0,Fi.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-gray-900 to-black",children:[(0,Fi.jsx)(m,{}),(0,Fi.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,Fi.jsxs)("div",{className:"text-center",children:[(0,Fi.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-500 mx-auto mb-4"}),(0,Fi.jsx)("p",{className:"text-white text-lg",children:"Loading live streams..."})]})})]}):c?(0,Fi.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-gray-900 to-black",children:[(0,Fi.jsx)(m,{}),(0,Fi.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,Fi.jsxs)("div",{className:"text-center",children:[(0,Fi.jsx)("div",{className:"text-red-400 text-6xl mb-4",children:"\u26a0\ufe0f"}),(0,Fi.jsx)("p",{className:"text-white text-lg mb-4",children:c}),(0,Fi.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Retry"})]})})]}):(0,Fi.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-gray-900 to-black",children:[(0,Fi.jsx)(m,{}),(0,Fi.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,Fi.jsx)(g,{}),0===o.length?(0,Fi.jsxs)("div",{className:"text-center py-16",children:[(0,Fi.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\ud83d\udcf9"}),(0,Fi.jsx)("h2",{className:"text-white text-2xl font-semibold mb-2",children:"No Live Streams"}),(0,Fi.jsx)("p",{className:"text-gray-400 mb-6",children:"No models are currently streaming. Check back later!"}),(0,Fi.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Refresh"})]}):(0,Fi.jsx)("div",{className:"grid gap-6 ".concat(a?"grid-cols-1":i?"grid-cols-2":"grid-cols-3 lg:grid-cols-4"),children:o.map((e=>(0,Fi.jsx)(h,{model:e},e.model_id)))})]}),(0,Fi.jsx)(_o,{})]})},Lo=e=>{let{children:t,allowedRoles:n=[]}=e;const{isAuthenticated:r,isLoading:a,user:i}=to();return a?(0,Fi.jsx)("div",{className:"min-h-screen bg-black flex items-center justify-center",children:(0,Fi.jsxs)("div",{className:"text-white text-center",children:[(0,Fi.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),(0,Fi.jsx)("p",{children:"Loading..."})]})}):r?n.length>0&&!n.includes(null===i||void 0===i?void 0:i.role)?(0,Fi.jsx)(Te,{to:"/",replace:!0}):t:(0,Fi.jsx)(Te,{to:"/login",replace:!0})},To=()=>{const{isAuthenticated:e}=to();return(0,Fi.jsxs)(Me,{children:[(0,Fi.jsx)(Re,{path:"/",element:(0,Fi.jsx)(Po,{})}),(0,Fi.jsx)(Re,{path:"/login",element:e?(0,Fi.jsx)(Te,{to:"/dashboard",replace:!0}):(0,Fi.jsx)(ho,{})}),(0,Fi.jsx)(Re,{path:"/register",element:e?(0,Fi.jsx)(Te,{to:"/dashboard",replace:!0}):(0,Fi.jsx)(Eo,{})}),(0,Fi.jsx)(Re,{path:"/dashboard",element:(0,Fi.jsx)(Lo,{children:(0,Fi.jsx)(Ro,{})})}),(0,Fi.jsx)(Re,{path:"/viewer-dashboard",element:(0,Fi.jsx)(Lo,{allowedRoles:["viewer"],children:(0,Fi.jsx)(go,{})})}),(0,Fi.jsx)(Re,{path:"/model-dashboard",element:(0,Fi.jsx)(Lo,{allowedRoles:["model"],children:(0,Fi.jsx)(yo,{})})}),(0,Fi.jsx)(Re,{path:"/admin-dashboard",element:(0,Fi.jsx)(Lo,{allowedRoles:["admin"],children:(0,Fi.jsx)(vo,{})})}),(0,Fi.jsx)(Re,{path:"/token-purchase",element:(0,Fi.jsx)(Lo,{allowedRoles:["viewer"],children:(0,Fi.jsx)(Co,{})})}),(0,Fi.jsx)(Re,{path:"/private-show/:modelId?",element:(0,Fi.jsx)(Lo,{children:(0,Fi.jsx)(bo,{})})}),(0,Fi.jsx)(Re,{path:"*",element:(0,Fi.jsx)(Te,{to:"/",replace:!0})})]})},Ro=()=>{const{user:e}=to();switch(null===e||void 0===e?void 0:e.role){case"admin":return(0,Fi.jsx)(Te,{to:"/admin-dashboard",replace:!0});case"model":return(0,Fi.jsx)(Te,{to:"/model-dashboard",replace:!0});default:return(0,Fi.jsx)(Te,{to:"/viewer-dashboard",replace:!0})}},Oo=e=>{let{children:n}=e;const[r,a]=t.useState((()=>!localStorage.getItem("quantumstrip_age_verified"))),[i,o]=t.useState("girls");return(0,Fi.jsxs)(Fi.Fragment,{children:[r&&(0,Fi.jsx)(po,{isOpen:!0,onClose:()=>{window.location.href="https://google.com"},onConfirm:e=>{o(e),a(!1),localStorage.setItem("quantumstrip_age_verified","true"),localStorage.setItem("quantumstrip_preferred_category",e)}}),n]})};const Mo=function(){return(0,Fi.jsx)("div",{className:"App min-h-screen bg-black",children:(0,Fi.jsx)(ro,{children:(0,Fi.jsx)(eo,{children:(0,Fi.jsx)(ht,{children:(0,Fi.jsx)(Oo,{children:(0,Fi.jsx)(To,{})})})})})})};r.createRoot(document.getElementById("root")).render((0,Fi.jsx)(t.StrictMode,{children:(0,Fi.jsx)(Mo,{})}))})()})();
//# sourceMappingURL=main.4177876c.js.map